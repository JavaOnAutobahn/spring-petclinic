[[test:Default]]
[role=group,includesConstraints="test:TestMethodWithoutAssertion,junit4:IgnoreWithoutMessage"]
== Tests

The following test rules apply:

- <<test:TestMethodWithoutAssertion>>
- All @Ignore annotations must provide a message

The following reports are created:

- <<test:TestAffectedByLastCommit>>

=== Annotations
When depending on infrastructure or framework functions, additional annotations are needed for a test case.

[source,java]
.Example for annotating tests
----
include::../src/test/java/org/springframework/samples/petclinic/service/ClinicServiceJpaTests.java[tag=test_annotations]
----
<1> The `@ActiveProfiles` annotation is only needed when you are using data from the database.

=== Constraints

[[test:TestMethodWithoutAssertion]]
[source,cypher,role=constraint,requiresConcepts="junit4:TestMethod,assertj:AssertMethod,spring-test-web:Assert"]
.All test methods must perform at least one assertion (within a call hierarchy of max. 3 steps).
----
MATCH
  (testType:Test:Type)-[:DECLARES]->(testMethod:Test:Method)
WHERE
  NOT (testMethod)-[:INVOKES*..3]->(:Method:Assert)
RETURN
  testType AS DeclaringType,
  testMethod AS Method
----

